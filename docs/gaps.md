# Implementation Gaps

This document tracks the parity status of the Rust rsync workspace. Each entry reflects the
current repository state and can be regenerated by auditing the source tree.

## Implemented
- **Protocol negotiation primitives** (`crates/protocol`): legacy ASCII detection, binary vs.
  legacy prologue sniffing, envelope encoding/decoding, multiplex helpers, and protocol
  selection APIs (`select_highest_mutual`, `ProtocolVersion` constants) are implemented with
  exhaustive unit and property tests.
- **Legacy daemon parsing**: helpers for `@RSYNCD:` banners, error/warning lines, and
  authentication prompts mirror upstream structures and are exported for higher layers.
- **Legacy greeting metadata**: structured parsers expose advertised protocol numbers,
  subprotocol values, and digest lists so higher layers can reproduce upstream
  negotiation decisions without re-parsing raw strings.
- **Transport negotiation sniffing** (`crates/transport`): stream wrappers preserve the
  bytes consumed while determining the negotiation style and expose `Read`/`BufRead`
  views so higher layers can replay the buffered prefix exactly as upstream rsync does.
- **Rolling and strong checksum primitives** (`crates/checksums`): exposes the `rsum`
  rolling checksum together with streaming MD4/MD5/XXH64 digests that match upstream
  algorithms, including error handling for invalid rolling-window usage.

## Partial
- None at this time.

## Missing
- **Workspace crates beyond `protocol`, `checksums`, and the negotiation helpers in
  `transport`** (`cli`, `core`, `engine`, `daemon`, etc.) are not yet present; no
  client/daemon binaries exist under `bin/`.
- **End-to-end negotiation orchestration**: higher-level handshake drivers that integrate the
  protocol helpers with transports are absent.
- **Feature gating and runtime integration**: ACL/xattr, compression, metadata handling, and
  logging facades described in the workspace layout have not been implemented.
- **CI packaging and interop harnesses**: no automation exists for upstream comparisons,
  packaging, or coverage enforcement beyond unit tests in the protocol crate.

## Divergent
- None observed; existing modules target upstream rsync 3.4.1 semantics.
