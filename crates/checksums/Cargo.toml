[package]
name = "checksums"
version.workspace = true
edition = "2024"
license = "GPL-3.0-or-later"

[package.metadata.docs.rs]
all-features = true
no-default-features = false
rustdoc-args = ["--cfg", "docsrs", "-D", "rustdoc::broken_intra_doc_links"]
targets = ["x86_64-unknown-linux-gnu"]

[features]
default = ["openssl-vendored"]
openssl = ["dep:openssl"]
openssl-vendored = ["openssl", "openssl/vendored"]
# Parallel checksum computation using rayon
parallel = ["rayon"]

[dependencies]
md4 = { version = "0.10", default-features = false, features = ["std"] }
md-5 = { version = "0.10", default-features = false, features = ["std"] }
digest = { version = "0.10", default-features = false, features = ["std"] }
sha1 = { version = "0.10", default-features = false, features = ["std"] }
sha2 = { version = "0.10", default-features = false, features = ["std"] }
xxhash-rust = { version = "0.8", default-features = false, features = ["xxh64", "xxh3"] }
thiserror = "2.0"
openssl = { version = "0.10", optional = true }
rayon = { version = "1.10", optional = true }
logging = { path = "../logging" }

[dev-dependencies]
proptest = "1.4"
criterion = { version = "0.5", features = ["html_reports"] }
rand = "0.8"

[[bench]]
name = "checksums_benchmark"
harness = false

[[bench]]
name = "parallel_benchmark"
harness = false
required-features = ["parallel"]
