#!/bin/sh
set -eu

SCRIPT_DIR=$(cd "$(dirname "$0")" && pwd)
CROSS_DIR=$(cd "${SCRIPT_DIR}/.." && pwd)
. "${CROSS_DIR}/lib.sh"

for candidate in \
    "${AARCH64_LINUX_GNU_GCC:-}" \
    "/usr/bin/aarch64-linux-gnu-gcc" \
    "/usr/local/bin/aarch64-linux-gnu-gcc" \
    "/opt/homebrew/bin/aarch64-linux-gnu-gcc" \
    "/opt/local/bin/aarch64-linux-gnu-gcc"
do
    if [ -n "$candidate" ] && [ -x "$candidate" ]; then
        exec "$candidate" "$@"
    fi
done

ZIG_BIN=$(resolve_zig_binary "$CROSS_DIR")
exec "$ZIG_BIN" cc -target aarch64-linux-gnu "$@"
